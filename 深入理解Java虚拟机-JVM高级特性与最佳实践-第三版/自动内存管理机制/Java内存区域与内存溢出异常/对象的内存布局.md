# 对象的内存布局



在HotSpot虚拟机中，对象在内存中存储的布局分为对象头Header、实例数据Instance Data、对齐填充Padding。
## 对象头
在HotSpot虚拟机中，对象头的第一部分用于存储对象自身的运行时数据。
```
Mark World：哈希码、GC分代年龄、锁状态标志、线程持有的锁、偏向线程ID、偏向时间戳。
```
|存储内容|标志位|状态|
|----|----|----|
|对象哈希码、对象分代年龄|01|未锁定|
|指向锁记录的指针|00|轻量级锁定|
|指向重量级锁的指针|10|膨胀（重量级锁定）|
|空，不需要记录信息|11|GC标记|
|偏向线程ID、偏向时间戳、对象分代年龄|01|可偏向|


在HotSpot虚拟机中，对象头的第二部分是类型指针，即对象指向它的类元数据的指针，虚拟机通过这个指针来确定这个对象是哪个类的实例。
## 实例数据
实例数据部分是对象真正存储的有效信息，也是程序代码中所定义的各种类型的字段内容。

## 对齐填充
对齐填充并不是必然存在的，无特别含义，起着占位符的作用，HotSpotVM的自动内存管理系统要求对象起始地址必须是8字节的整数倍，也就是对象的大小必须是8字节的整数倍，对象头正好是8字节的倍数，所以当对象实例数据部分没有对齐，就需要通过对齐填充来补全。

